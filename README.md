# Otello

Backend-проект по бронированию номеров и покупке авиабилетов на Go.

> Быстрое руководство по настройке и запуску

---

## Немного про стек

**Otello** использует MongoDB в качестве базы данных и JWT для аутентификации. Проект написан по паттерну The Clean Architecture с каплей DDD, что помогает легкой разработке и высокой расширяемости


---

## Требования

* Go 1.20+ (рекомендуется 1.24.5)
* MongoDB (локально или удалённый)
* `swag` для генерации Swagger документации (`go install github.com/swaggo/swag/cmd/swag@latest`)

---

## Инструкция для запуска

1. Склонируйте репозиторий и перейдите в его корень:

```bash
git clone github.com/rom6n/otello
cd otello
```

2. Создайте `.env` файл в корне проекта и добавьте в него переменные окружения.

Пример `.env`:

```env
# Секрет для подписи JWT (для тестов можно использовать пример)
JWT_KEY=cDN2GaMHiuxyA_RbQUUni7zwKcemuzo5cIsHmOnDbJ8

# Порт для запуска приложения (по умолчанию 8080)
PORT=8080

# Строка подключения к MongoDB
# Пример для локального подключения:
MONGO_URI=mongodb://localhost:27017/
```

3. Установите и подтяните все зависимости командой:

```bash
go mod tidy
```

4. Инициализируйте Swagger:

```bash
swag init -g internal/cmd/app/main.go
```

5. Если вы используете HTTPS шифрование и хотите включить флаг secure для cookies,
   откройте файл `otello/internal/utils/httpUtils/buildCookie.go` и измените константу `SecureNeed` на `true`.

```go
// otello/internal/utils/httpUtils/buildCookie.go
const SecureNeed = true // включите, если используете https
```

6. Запустите проект из корня репозитория:

```bash
go run ./internal/cmd/app/
```

Приложение будет доступно по адресу и порту `http://localhost:8080` (или тот, который вы указали в `.env`).

---

## Swagger

* Откройте `http://localhost:8080/docs` чтобы посмотреть все роуты API.

---

## Аккаунт и права
* Создайте новый аккаут через Swagger в разделе `Пользователь` с помощью email и пароля 
* Вы можете выдать себе роль админа в этом же разделе, введя пароль `SiriusTop1#` (если в .env для JWT_KEY использовали секрет из примера), либо искусственно с помощью MongoDB Atlas
* И можете в этом же разделе обратно вернуть роль пользователя (без пароля)
---
## Разработчик

* Захаров Роман ([Telegram](t.me/MrRoman))

